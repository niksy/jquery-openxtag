/*! jquery-openxtag - 1.2.1 */
!function($){function _documentWriteSafeAppend(a,b,c){var d=0;!function(a){if(a.match(/document\.write|<script/)){var e,f;if(b.data("no-postscribe"))e=document.write,f="",document.write=function(a){f+=a},document.write=e;else if(postscribe(b,a,$.proxy(c,b,b)),a.match(/link.+href/)){var g=$(a);8>=ieVersion&&g.filter("link").each(function(a,b){$('<link rel="stylesheet" type="text/css" href="'+$(b).attr("href")+'" />').appendTo("head")})}d++,d>_loopIterations&&$.error("openxtag: document.write loop stopped after "+_loopIterations+" iterations"),b.data("no-postscribe")&&arguments.callee(f)}else b.append(a),"function"==typeof c&&""!=a&&setTimeout(function(){c.call(b,b)},0)}(a)}function _genericZoneCall(a,b,c,d){("object"==typeof b||"function"==typeof b)&&(d=c,c=b,b=null),"function"==typeof c&&(d=c,c=null);var e=$.extend(defaults,c);return null!=b&&(e.zoneID=b),a.apply(this,[b,e,d])}function _validateSettings(a){"https:"==location.protocol?"string"!=typeof a.deliverySSL&&$.error('please set "deliverySSL" option for openxtag'):"string"!=typeof a.delivery&&$.error('please set "delivery" option for openxtag')}function _buildStandardRequestParameters(a){var b={charset:a.charset,target:a.target,source:a.source,loc:window.location.href};"undefined"!=typeof a.extra&&(b=$.extend(b,a.extra)),"undefined"!=typeof a.block&&(b.block=a.block?1:0),"undefined"!=typeof a.blockcampaign&&(b.blockcampaign=a.blockcampaign?1:0),document.referrer&&(b.referer=document.referrer);for(var c in b)("undefined"==typeof b[c]||""==b[c])&&delete b[c];return b}function loadFlashObjectOnce(a,b){if("undefined"!=typeof window.org&&"undefined"!=typeof window.org.openx&&"undefined"!=typeof window.org.openx.SWFObject)b();else{var c=("https:"==location.protocol?a.deliverySSL:a.delivery)+"/"+a.swfObjectJS;$.getScript(c,b)}}var _loopIterations=10,ieVersion=function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),defaults={jsPrefix:"OA_",swfObjectJS:"fl.js",delivery:null,deliverySSL:null,jsTagScript:"ajs.php",spcTagScript:"spc.php",iframeTagScript:"afr.php",adViewScript:"avw.php",clickScript:"ck.php",charset:"UTF-8",zoneID:null,target:void 0,source:void 0,blockcampaign:void 0,block:void 0,forceAsync:!1,refresh:void 0,resize:void 0,allowtransparent:void 0,width:void 0,height:void 0,extra:void 0},init=function(a){defaults=$.extend(defaults,a)},jsZone=function(a,b,c){return this.each(function(){var a=$(this),d=$.extend({},b);"undefined"!=typeof $.metadata&&(d=$.extend(d,a.metadata())),_validateSettings(d);var e=d.zoneID;null==e&&$.error('please set "zoneID" option for openxtag jsZone');var f=_buildStandardRequestParameters(d);f.zoneid=e,f.cb=Math.floor(99999999999*Math.random()),document.MAX_used||(document.MAX_used=","),","!=document.MAX_used&&(f.exclude=document.MAX_used),document.context&&(f.context=document.context),document.mmm_fo&&(f.mmm_fo=1);var g=("https:"==location.protocol?d.deliverySSL:d.delivery)+"/"+d.jsTagScript;$.ajax({url:g,data:f,dataType:"html",async:d.forceAsync,success:function(b){_documentWriteSafeAppend('<script type="text/javascript">'+b+"</script>",a,c)}})})},iFrameZone=function(a,b){return this.each(function(){var a=$(this),c=$.extend({},b);"undefined"!=typeof $.metadata&&(c=$.extend(c,a.metadata())),_validateSettings(c);var d=c.zoneID;null==d&&$.error('please set "zoneID" option for openxtag iframe');var e=_buildStandardRequestParameters(c);e.zoneid=d,e.cb=Math.floor(99999999999*Math.random()),"undefined"!=typeof c.refresh&&(e.refresh=c.refresh),"undefined"!=typeof c.resize&&(e.resize=c.resize?1:0),"undefined"==typeof c.width&&$.error("openxtag: width parameter is required for iframe tag");var f=c.width;"undefined"==typeof c.height&&$.error("openxtag: height parameter is required for iframe tag");var g=c.height,h="";"allowtransparent"!=typeof c.allowtransparent&&c.allowtransparent&&(h=' allowtransparency="true" ');var i="a"+Math.floor(999999*Math.random()),j="undefined"==typeof c.target?"_blank":c.target,k="https:"==location.protocol?c.deliverySSL:c.delivery,l=k+"/"+c.iframeTagScript,m=k+"/"+c.clickScript,n=k+"/"+c.adViewScript;a.append("<iframe id='"+i+"' name='"+i+"' src='"+l+"?"+$.param(e)+"' frameborder='0' scrolling='no' width='"+f+"' height='"+g+"'"+h+"><a href='"+m+"?n="+i+"&amp;cb="+e.cb+"' target='"+j+"'><img src='"+n+"?zoneid="+d+"&amp;cb="+e.cb+"&amp;n="+i+"' border='0' alt='' /></a></iframe>")})},spcTag=function(zoneID,settings,success){var zones={},i=0,chainObj=this.each(function(){var a=$(this),b=$.extend({},settings);"undefined"!=typeof $.metadata&&(b=$.extend(b,a.metadata())),b=$.extend(b,a.data()),b.zoneID=b.zoneId,delete b.zoneId;var c=b.zoneID;null==c&&$.error('please set "zoneID" option for openxtag jsZone');var d=b.zoneName;zones[d]=c,a.data("openxtag",{zn:d}),i++}),thesettings=$.extend({},settings);_validateSettings(thesettings);var data=_buildStandardRequestParameters(thesettings);data.zones=$.map(zones,function(a,b){return b+"="+a}).join("|"),data.nz=1;var scriptURL=("https:"==location.protocol?thesettings.deliverySSL:thesettings.delivery)+"/"+thesettings.spcTagScript,that=this;return $.ajax({url:scriptURL,data:data,dataType:"script",success:function(data){loadFlashObjectOnce(thesettings,function(){var output=eval("(function () {"+data+";return "+thesettings.jsPrefix+"output;})()");that.each(function(){var a=$(this);_documentWriteSafeAppend(output[a.data("openxtag").zn],a,success)})})}}),chainObj},fnMethods={zone:jsZone,jsZone:jsZone,spc:spcTag,iframe:iFrameZone};$.fn.extend({openxtag:function(a){return fnMethods[a]?_genericZoneCall.apply(this,[fnMethods[a]].concat(Array.prototype.slice.call(arguments,1))):void $.error("Method "+a+" does not exist on jQuery.openxtag")}});var methods={init:init};$.extend({openxtag:function(a){return methods[a]?methods[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void $.error("Method "+a+" does not exist on jQuery.openxtag"):methods.init.apply(this,arguments)}})}(jQuery);